# rope.network - Redirect to datachain.network

server {
    listen 80;
    server_name rope.network www.rope.network erpc.rope.network ws.rope.network;
    return 301 https://$host$request_uri;
}

server {
    listen 443 ssl;
    http2 on;
    server_name rope.network www.rope.network;

    ssl_certificate /etc/nginx/ssl/rope.network/fullchain.pem;
    ssl_certificate_key /etc/nginx/ssl/rope.network/privkey.pem;
    ssl_protocols TLSv1.2 TLSv1.3;

    return 301 https://datachain.network$request_uri;
}

# RPC Endpoint (Let's Encrypt)
server {
    listen 443 ssl;
    http2 on;
    server_name erpc.rope.network;

    ssl_certificate /etc/nginx/ssl/erpc.rope.network/fullchain.pem;
    ssl_certificate_key /etc/nginx/ssl/erpc.rope.network/privkey.pem;
    ssl_protocols TLSv1.2 TLSv1.3;

    add_header Access-Control-Allow-Origin * always;

    location / {
        default_type application/json;
        return 200 '{"jsonrpc":"2.0","result":"Rope Network RPC","id":1}';
    }
}

# WebSocket Endpoint (Let's Encrypt)
server {
    listen 443 ssl;
    http2 on;
    server_name ws.rope.network;

    ssl_certificate /etc/nginx/ssl/ws.rope.network/fullchain.pem;
    ssl_certificate_key /etc/nginx/ssl/ws.rope.network/privkey.pem;
    ssl_protocols TLSv1.2 TLSv1.3;

    location / {
        default_type application/json;
        return 200 '{"status":"pending","message":"WebSocket endpoint coming soon"}';
    }
}
